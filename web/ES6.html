<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>let 和const 块级作用域 | ganyzpro的Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="This is a blog.">
    
    <link rel="preload" href="/blog_web/assets/css/0.styles.45996688.css" as="style"><link rel="preload" href="/blog_web/assets/js/app.8894f8d9.js" as="script"><link rel="preload" href="/blog_web/assets/js/2.e4626adb.js" as="script"><link rel="preload" href="/blog_web/assets/js/10.789ba78f.js" as="script"><link rel="prefetch" href="/blog_web/assets/js/11.586a089a.js"><link rel="prefetch" href="/blog_web/assets/js/12.b7832dcb.js"><link rel="prefetch" href="/blog_web/assets/js/13.fd017c44.js"><link rel="prefetch" href="/blog_web/assets/js/14.d8f5b758.js"><link rel="prefetch" href="/blog_web/assets/js/3.50f86551.js"><link rel="prefetch" href="/blog_web/assets/js/4.95d25400.js"><link rel="prefetch" href="/blog_web/assets/js/5.61894ef1.js"><link rel="prefetch" href="/blog_web/assets/js/6.9893c1b3.js"><link rel="prefetch" href="/blog_web/assets/js/7.04291d83.js"><link rel="prefetch" href="/blog_web/assets/js/8.8e1f8f5f.js"><link rel="prefetch" href="/blog_web/assets/js/9.fdd60f03.js">
    <link rel="stylesheet" href="/blog_web/assets/css/0.styles.45996688.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog_web/" class="home-link router-link-active"><!----> <span class="site-name">ganyzpro的Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog_web/web/js.html" class="nav-link">
  Web
</a></div><div class="nav-item"><a href="/blog_web/dataStru/stack.html" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><a href="https://github.com/ganyzpro/blog_web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog_web/web/js.html" class="nav-link">
  Web
</a></div><div class="nav-item"><a href="/blog_web/dataStru/stack.html" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><a href="https://github.com/ganyzpro/blog_web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog_web/web/js.html" class="sidebar-link">js基础</a></li><li><a href="/blog_web/web/ES6.html" aria-current="page" class="active sidebar-link">ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#let-和const-块级作用域" class="sidebar-link">let 和const 块级作用域</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#解构赋值-数组、对象" class="sidebar-link">解构赋值 数组、对象</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#函数作用域-箭头函数" class="sidebar-link">函数作用域，箭头函数</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#合并对象" class="sidebar-link">合并对象</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#symbol是不会重复的值-第七种基本数据结构" class="sidebar-link">symbol是不会重复的值，第七种基本数据结构</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#proxy" class="sidebar-link">Proxy</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#iterator和for-of循环" class="sidebar-link">Iterator和for of循环</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#generator" class="sidebar-link">Generator</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#async" class="sidebar-link">async</a></li><li class="sidebar-sub-header"><a href="/blog_web/web/ES6.html#class-extend" class="sidebar-link">class extend</a></li></ul></li><li><a href="/blog_web/web/handle.html" class="sidebar-link">手写源码</a></li><li><a href="/blog_web/web/vueSouce.html" class="sidebar-link">vue原理</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="let-和const-块级作用域"><a href="#let-和const-块级作用域" class="header-anchor">#</a> let 和const 块级作用域</h2> <h2 id="解构赋值-数组、对象"><a href="#解构赋值-数组、对象" class="header-anchor">#</a> 解构赋值 数组、对象</h2> <div class="language- extra-class"><pre><code>    //返回多个值
    let {foo , bar} = example()
    function example() {
        return {
        foo:1,
        bar:2
        }
    }
    //提取json数据
    let {id,status,data:number} = jsonData
    //展开
    [...obj] 
</code></pre></div><h2 id="函数作用域-箭头函数"><a href="#函数作用域-箭头函数" class="header-anchor">#</a> 函数作用域，箭头函数</h2> <div class="language- extra-class"><pre><code>    第一题
    function foo() {
        console.log(a);
        a = 1;
    }
    
    foo(); // ???
    
    function bar() {
        a = 1;
        console.log(a);
    }
    bar(); // ???
</code></pre></div><p>第一段会报错：Uncaught ReferenceError: a is not defined。</p> <p>第二段会打印：1。</p> <p>这是因为函数中的 &quot;a&quot; 并没有通过 var 关键字声明，所有不会被存放在 AO 中。
第一段执行 console 的时候， AO 的值是：</p> <div class="language- extra-class"><pre><code>    AO = {
        arguments: {
            length: 0
        }
    }
</code></pre></div><p>没有 a 的值，然后就会到全局去找，全局也没有，所以会报错。</p> <p>当第二段执行 console 的时候，全局对象已经被赋予了 a 属性，这时候就可以从全局找到 a 的值，所以会打印 1。</p> <p>第二题</p> <div class="language- extra-class"><pre><code>    console.log(foo);
    
    function foo(){
        console.log(&quot;foo&quot;);
    }
    
    var foo = 1;
</code></pre></div><p>会打印函数，而不是 undefined 。
这是因为在进入执行上下文时，首先会处理函数声明，其次会处理变量声明，如果变量名称跟已经声明的形式参数或函数相同，则变量声明不会干扰已经存在的这类属性。</p> <h2 id="合并对象"><a href="#合并对象" class="header-anchor">#</a> 合并对象</h2> <div class="language- extra-class"><pre><code>    const target = { a: 1 };
    const source1 = { b: 2 };
    const source2 = { c: 3 };
    Object.assign(target, source1, source2);
    target // {a:1, b:2, c:3}
</code></pre></div><h2 id="symbol是不会重复的值-第七种基本数据结构"><a href="#symbol是不会重复的值-第七种基本数据结构" class="header-anchor">#</a> symbol是不会重复的值，第七种基本数据结构</h2> <p>六种基本类型undefined、boolean、number、string、null、symbol</p> <p>set集合和map字典
都不允许相同
都有增 删has，遍历
set类数组，key values一样。Array.from()方法转数组。[.. . set]也可。add
new Map([1,2,3])</p> <p>map类对象，键可以是任何类型，而对象键只能是符串。get set
map转数组也是[.. . map]。转对象则遍历set</p> <p>for in和for of
of是获取值，只遍历实例属性，不遍历原型。主用于数组，map set generator。
in是获取键名，主要用于对象，会遍历原型，效低。</p> <h2 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h2> <div class="language- extra-class"><pre><code>    var obj = new Proxy({},{
    get: func
    set: func
    })
    obj.count=1
    //对Proxy实例操作才会生效
</code></pre></div><p>Reflect</p> <p>将Object对象的一些明显属于语言内部的方法放到Reflect对象上。比如Object.defineProperty</p> <h2 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h2> <p>Promise对象的状态不受外界影响，只有异步操作的结果可以决定当前是哪种状态，其他任何操作都无法改变这个状态；一旦状态改变就不会再变。</p> <p>new一个Promise对象,接受resolve和reject两个函数作为参数。Promise new之后会立即执行，如resolve则会调用then回调。</p> <p>Promise中任何一个抛出的错误都会被最后一个catch捕获。如果promise链上某个步骤抛出了错误但是后面没有catch方法了，会导致这个错误不会被捕获也不会传递到外层。</p> <div class="language- extra-class"><pre><code>    var p = Promise.all([p1,p2,p3]) //三个都resolv或者有一个reject触发回调

    var p = Promise.race([p1,p2,p3]) //只要有一个状态改变就会触发回调
</code></pre></div><p>Promise.resolve() 可以直接返回一个Resolved状态的Promise对象</p> <p>Promise.reject()</p> <div class="language- extra-class"><pre><code>    new Promise((resolve,reject) =&gt; {
    resolve(1);
    cosole.log(2)
    }).then(r=&gt;{
    console.log(r)
    })
    //2
    //1
    
    new Promise((resolve,reject)=&gt; {
    return resolve(1);
    //后面的不会执行
    console.log(2)
    })
</code></pre></div><p>axios取消请求。提供了api用来取消cancelToken。原理是在peomise里暴露一个回调函数直接resolve。</p> <h2 id="iterator和for-of循环"><a href="#iterator和for-of循环" class="header-anchor">#</a> Iterator和for of循环</h2> <p>遍历器对象有next()方法，每次调用返回{value:  done:  }。ES6规定默认的Iteratorj接口部署再数据结构的Symbol.iterator属性。是个fuc</p> <p>具备Iterator的数据结构
Array、Map、Set、String、函数的arguments对象、NodeList对象</p> <p>数组、set、map部署了，都返回遍历器对象
entries() [键名，键值]，map的iterator接口默认就是调用entries方法。keys() 建名values() 键值</p> <h2 id="generator"><a href="#generator" class="header-anchor">#</a> Generator</h2> <p>yield 是暂停标志，next()方法恢复执行。
Generator函数 （）执行返回一个遍历器对象，再调用next（）才会执行。执行到yield标志处，将yield后的值，表达式求值，函数则会执行。然后将值以{value: 值,done: }的形式返回。</p> <p>co自动执行函数，yield后面要是promise。只要g函数还没执行到最后一步，next函数就调用自身。</p> <div class="language- extra-class"><pre><code>    function run(gen) {
        var g = gen()
        function next(data) {
            var result = g.next(data);
            if(result.done) return result.value
            result.value.then(function(data){
                next(data)
            })
        }
        next()
    }
</code></pre></div><h2 id="async"><a href="#async" class="header-anchor">#</a> async</h2> <p>语法糖，将Generator函数和自动执行器包装在一个函数里。</p> <p>yield后面可以是原始类型的值，会被转成一个立即resolve的promise，此时等同于同步操作。</p> <p>async函数里有多个await，只要有一个await后面的promise变成了reject，那么整个async函数都会中断执行</p> <div class="language- extra-class"><pre><code>    let [foo,bar] = await Promise.all([getFoo(),getBar()])
</code></pre></div><h2 id="class-extend"><a href="#class-extend" class="header-anchor">#</a> class extend</h2> <div class="language- extra-class"><pre><code>    class Point{
    constructor(x,y) {
    this.x
    }
    toString() {}
    }
</code></pre></div><p>class中的constructor就是ES5里的构造函数，其他方法直接定义在原型Point.prototype上。</p> <p>Object.assign(Point.prototype,{toString(){}})可往原型上添加方法。</p> <p>p.hasOwnProperty('')可以判断变量或者方法是否在实例对象p上。</p> <p>class里加static表示该定义在该类上的静态属性 方法，Point.toString()可以调用，new的实例上无法调用。</p> <div class="language- extra-class"><pre><code>    class CPoint extends Point {
        constructor(x,y,color) {
            super(x,y);
            this.color = color;
        }
        toString() {
            return this.color + '' + super.toSting()
        }
    }
</code></pre></div><p>super()表示调用父类的构造函数，用来新建父类的this对象。</p> <p>ES5的继承是先创造子类的实例对象this然后将父类的方法添加到this上面（Parent）.ES6的继承是先创造父类的实例对象然后再用字类的构造函数修改this对其进行加工。必须先在构造方法里调用super方法，才能使用this关键字。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog_web/web/js.html" class="prev">
        js基础
      </a></span> <span class="next"><a href="/blog_web/web/handle.html">
        手写源码
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog_web/assets/js/app.8894f8d9.js" defer></script><script src="/blog_web/assets/js/2.e4626adb.js" defer></script><script src="/blog_web/assets/js/10.789ba78f.js" defer></script>
  </body>
</html>
